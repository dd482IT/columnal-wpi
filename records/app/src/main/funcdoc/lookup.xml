<?xml version="1.0"?>
<functionDocumentation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                       xsi:noNamespaceSchemaLocation="funcdoc.xsd"
                       namespace="lookup">
    <functionGroup id="lookup" title="Lookup functions">
        <description>Functions for looking up one item in a list using another</description>
        <function name="lookup">
            <typeArg>a</typeArg>
            <typeArg>b</typeArg>
            <typeConstraint>Equatable a</typeConstraint>
            <argType>([@typevar a], @typevar a, [@typevar b])</argType>
            <returnType>@typevar b</returnType>
            <description>
                <p>Given a list, finds a matching item, and returns the corresponding value from the other list.</p>
                <p>This is useful for looking up one column via the value of another, e.g. lookup(Column A, value in A, Column B)</p>
                <p>Gives an error if there are zero or multiple matches in the left side.</p>
            </description>
            <exampleGroup>
                <table name="Scores">
                    <columns>
                        <column name="Person" type="Text"/>
                        <column name="Score" type="Number"/>
                    </columns>
                    <data>
                        <row><d>"Janet"</d><d>78</d></row>
                        <row><d>"Asim"</d><d>36</d></row>
                        <row><d>"Qing"</d><d>45</d></row>
                    </data>
                </table>
                <example>
                    <inputDisplay>lookup(Person, "Qing", Score)</inputDisplay>
                    <inputParse>@call @function lookup(@entirecolumn Scores:Person, "Qing", @entirecolumn Scores:Score)</inputParse>
                    <output>45</output>
                </example>
                <example>
                    <inputDisplay>lookup(Person, "Hannah", Score)</inputDisplay>
                    <inputParse>@call @function lookup(@entirecolumn Scores:Person, "Hannah", @entirecolumn Scores:Score)</inputParse>
                    <output>error</output>
                </example>
            </exampleGroup>
            <example>
                <input>([4, 5, 6], 6, ["a", "b", "c"])</input>
                <output>"c"</output>
            </example>
            <example>
                <input>([1, 1, 2, 3], 1, ["a", "b", "c", "d"])</input>
                <output>error</output>
            </example>
        </function>
        <function name="lookup all">
            <typeArg>a</typeArg>
            <typeArg>b</typeArg>
            <typeConstraint>Equatable a</typeConstraint>
            <argType>([@typevar a], @typevar a, [@typevar b])</argType>
            <returnType>[@typevar b]</returnType>
            <description>
                <p>Given two lists, finds all the items with a matching value in left list, and returns the right list values for each.</p>
                <p>This is useful for looking up one column via the value of another, e.g. lookup all(Column A, value in A, Column B)</p>
            </description>
            <example>
                <input>([1, 2, 1, 3], 1, ["a", "b", "c", "d"])</input>
                <output>["a", "c"]</output>
            </example>
        </function>     
        <!--
        <function name="lookup all paired">
            <typeArg>a</typeArg>
            <typeArg>b</typeArg>
            <typeConstraint>Equatable a</typeConstraint>
            <argType>([(a, b)], a)</argType>
            <returnType>[b]</returnType>
            <description>
                <p>Given a list of pairs, finds all the items with a matching left-hand value, and returns the right-hand values for each.</p>
                <p>This is useful for looking up one column via the value of another, e.g. lookup single(pair lists(Column A, Column B), value)</p>
            </description>
            <example>
                <input>([(1, "a"), (2, "b"), (1, "f")], 1)</input>
                <output>["a", "f"]</output>
            </example>
        </function>
        -->
    </functionGroup>
</functionDocumentation>